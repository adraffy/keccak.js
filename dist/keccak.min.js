function t(t=256){return new a(t,1)}function e(t=256){return new a(t,6)}function r(t){return new f(t,31)}function n(t){return[...t].map((t=>t.toString(16).padStart(2,"0"))).join("")}function i(t){if("string"!=typeof t)throw TypeError("expected string");t.startsWith("0x")&&(t=t.slice(2)),1&t.length&&(t=`0${t}`);let e=t.length>>1,r=new Uint8Array(e);for(let n=0,i=0;n<e;n++){let e=parseInt(t.slice(i,i+=2),16);if(Number.isNaN(e))throw new TypeError("expected hex byte");r[n]=e}return r}function s(t){if("string"!=typeof t)throw TypeError("expected string");try{t=unescape(encodeURIComponent(t))}catch(t){throw new Error("malformed utf8",{cause:t})}let{length:e}=t,r=new Uint8Array(e);for(let n=0;n<e;n++)r[n]=t.charCodeAt(n);return r}function o(t){try{return decodeURIComponent(escape(String.fromCharCode(...t)))}catch(t){throw new Error("malformed utf8",{cause:t})}}class c{constructor(t,e){const r=1600;if(31&t)throw new Error("capacity % 32 != 0");if(t<0||t>=r)throw new Error("capacity must be [0,1600)");this.sponge=Array(50).fill(0),this.block_count=r-t>>5,this.block_index=0,this.suffix=e,this.ragged_block=0,this.ragged_shift=0}update(t){if(!(t instanceof Uint8Array))if(t instanceof ArrayBuffer)t=new Uint8Array(t);else if(Array.isArray(t))t=Uint8Array.from(t);else{if("string"!=typeof t)throw new TypeError("expected bytes");t=s(t)}let e=0,r=t.length;if(this.ragged_shift>0&&(e=this._add_ragged(t,0),e==r))return this;let{sponge:n,block_index:i,block_count:o}=this;for(;e+4<=r;e+=4)n[i++]^=t[e]|t[e+1]<<8|t[e+2]<<16|t[e+3]<<24,i==o&&(l(n),i=0);return this.block_index=i,e<r&&this._add_ragged(t,e),this}_add_ragged(t,e){let{ragged_shift:r,ragged_block:n}=this,i=0;for(;e<t.length&&r<32;i++,e++,r+=8)n|=t[e]<<r;return 32==r&&(this._add_block(n),r=0,n=0),this.ragged_block=n,this.ragged_shift=r,i}_add_block(t){let{sponge:e,block_index:r,block_count:n}=this;e[r++]^=t,r==n&&(l(e),r=0),this.block_index=r}finalize(){let{sponge:t,suffix:e,ragged_shift:r,block_index:n,block_count:i}=this;if(r){if(-1==r)return;e=this.ragged_block|e<<r}t[n]^=e,t[i-1]^=2147483648,l(t),this.ragged_shift=-1}}class f extends c{constructor(t,e){super(t<<1,e),this.size0=t>>2,this.byte_offset=0}hex(t){return n(this.bytes(t))}bytes(t){this.finalize(),t||(t=this.size0);let{sponge:e,byte_offset:r,block_count:n}=this,i=3&r,s=(i>0)+(t+3>>2),o=new Int32Array(s),c=(r>>2)%n;for(let t=0;t<s;t++)o[t]=e[c++],c==n&&(l(e),c=0);return this.byte_offset=r+t,new Uint8Array(o.buffer,i,t)}}class a extends c{constructor(t,e){super(t<<1,e),this.size=t>>5}get hex(){return n(this.bytes)}get bytes(){this.finalize();let{size:t,sponge:e}=this,r=new Int32Array(t);for(let n=0;n<t;n++)r[n]=e[n];return new Uint8Array(r.buffer)}}const h=[1,0,32898,0,32906,-2147483648,-2147450880,-2147483648,32907,0,-2147483647,0,-2147450751,-2147483648,32777,-2147483648,138,0,136,0,-2147450871,0,-2147483638,0,-2147450741,0,139,-2147483648,32905,-2147483648,32771,-2147483648,32770,-2147483648,128,-2147483648,32778,0,-2147483638,-2147483648,-2147450751,-2147483648,32896,-2147483648,-2147483647,0,-2147450872,-2147483648];function l(t){for(let e=0;e<48;e+=2){let r=t[0]^t[10]^t[20]^t[30]^t[40],n=t[1]^t[11]^t[21]^t[31]^t[41],i=t[2]^t[12]^t[22]^t[32]^t[42],s=t[3]^t[13]^t[23]^t[33]^t[43],o=t[4]^t[14]^t[24]^t[34]^t[44],c=t[5]^t[15]^t[25]^t[35]^t[45],f=t[6]^t[16]^t[26]^t[36]^t[46],a=t[7]^t[17]^t[27]^t[37]^t[47],l=t[8]^t[18]^t[28]^t[38]^t[48],g=t[9]^t[19]^t[29]^t[39]^t[49],u=l^(i<<1|s>>>31),d=g^(s<<1|i>>>31);t[0]^=u,t[1]^=d,t[10]^=u,t[11]^=d,t[20]^=u,t[21]^=d,t[30]^=u,t[31]^=d,t[40]^=u,t[41]^=d,u=r^(o<<1|c>>>31),d=n^(c<<1|o>>>31),t[2]^=u,t[3]^=d,t[12]^=u,t[13]^=d,t[22]^=u,t[23]^=d,t[32]^=u,t[33]^=d,t[42]^=u,t[43]^=d,u=i^(f<<1|a>>>31),d=s^(a<<1|f>>>31),t[4]^=u,t[5]^=d,t[14]^=u,t[15]^=d,t[24]^=u,t[25]^=d,t[34]^=u,t[35]^=d,t[44]^=u,t[45]^=d,u=o^(l<<1|g>>>31),d=c^(g<<1|l>>>31),t[6]^=u,t[7]^=d,t[16]^=u,t[17]^=d,t[26]^=u,t[27]^=d,t[36]^=u,t[37]^=d,t[46]^=u,t[47]^=d,u=f^(r<<1|n>>>31),d=a^(n<<1|r>>>31),t[8]^=u,t[9]^=d,t[18]^=u,t[19]^=d,t[28]^=u,t[29]^=d,t[38]^=u,t[39]^=d,t[48]^=u,t[49]^=d;let _=t[0],y=t[1],b=t[11]<<4|t[10]>>>28,p=t[10]<<4|t[11]>>>28,w=t[20]<<3|t[21]>>>29,x=t[21]<<3|t[20]>>>29,k=t[31]<<9|t[30]>>>23,A=t[30]<<9|t[31]>>>23,m=t[40]<<18|t[41]>>>14,U=t[41]<<18|t[40]>>>14,E=t[2]<<1|t[3]>>>31,z=t[3]<<1|t[2]>>>31,C=t[13]<<12|t[12]>>>20,I=t[12]<<12|t[13]>>>20,T=t[22]<<10|t[23]>>>22,N=t[23]<<10|t[22]>>>22,S=t[33]<<13|t[32]>>>19,R=t[32]<<13|t[33]>>>19,j=t[42]<<2|t[43]>>>30,B=t[43]<<2|t[42]>>>30,W=t[5]<<30|t[4]>>>2,$=t[4]<<30|t[5]>>>2,q=t[14]<<6|t[15]>>>26,v=t[15]<<6|t[14]>>>26,D=t[25]<<11|t[24]>>>21,F=t[24]<<11|t[25]>>>21,G=t[34]<<15|t[35]>>>17,H=t[35]<<15|t[34]>>>17,J=t[45]<<29|t[44]>>>3,K=t[44]<<29|t[45]>>>3,L=t[6]<<28|t[7]>>>4,M=t[7]<<28|t[6]>>>4,O=t[17]<<23|t[16]>>>9,P=t[16]<<23|t[17]>>>9,Q=t[26]<<25|t[27]>>>7,V=t[27]<<25|t[26]>>>7,X=t[36]<<21|t[37]>>>11,Y=t[37]<<21|t[36]>>>11,Z=t[47]<<24|t[46]>>>8,tt=t[46]<<24|t[47]>>>8,et=t[8]<<27|t[9]>>>5,rt=t[9]<<27|t[8]>>>5,nt=t[18]<<20|t[19]>>>12,it=t[19]<<20|t[18]>>>12,st=t[29]<<7|t[28]>>>25,ot=t[28]<<7|t[29]>>>25,ct=t[38]<<8|t[39]>>>24,ft=t[39]<<8|t[38]>>>24,at=t[48]<<14|t[49]>>>18,ht=t[49]<<14|t[48]>>>18;t[0]=_^~C&D,t[1]=y^~I&F,t[10]=L^~nt&w,t[11]=M^~it&x,t[20]=E^~q&Q,t[21]=z^~v&V,t[30]=et^~b&T,t[31]=rt^~p&N,t[40]=W^~O&st,t[41]=$^~P&ot,t[2]=C^~D&X,t[3]=I^~F&Y,t[12]=nt^~w&S,t[13]=it^~x&R,t[22]=q^~Q&ct,t[23]=v^~V&ft,t[32]=b^~T&G,t[33]=p^~N&H,t[42]=O^~st&k,t[43]=P^~ot&A,t[4]=D^~X&at,t[5]=F^~Y&ht,t[14]=w^~S&J,t[15]=x^~R&K,t[24]=Q^~ct&m,t[25]=V^~ft&U,t[34]=T^~G&Z,t[35]=N^~H&tt,t[44]=st^~k&j,t[45]=ot^~A&B,t[6]=X^~at&_,t[7]=Y^~ht&y,t[16]=S^~J&L,t[17]=R^~K&M,t[26]=ct^~m&E,t[27]=ft^~U&z,t[36]=G^~Z&et,t[37]=H^~tt&rt,t[46]=k^~j&W,t[47]=A^~B&$,t[8]=at^~_&C,t[9]=ht^~y&I,t[18]=J^~L&nt,t[19]=K^~M&it,t[28]=m^~E&q,t[29]=U^~z&v,t[38]=Z^~et&b,t[39]=tt^~rt&p,t[48]=j^~W&O,t[49]=B^~$&P,t[0]^=h[e],t[1]^=h[e+1]}}export{i as bytes_from_hex,s as bytes_from_utf8,n as hex_from_bytes,t as keccak,e as sha3,r as shake,o as utf8_from_bytes};
