function t(t=256){return new h(t,1)}function e(t=256){return new h(t,6)}function r(t){return new f(t,31)}function o(e){if("string"!=typeof e)throw TypeError("expected string");var r=(e=unescape(encodeURIComponent(e)))["length"];let n=new Uint8Array(r);for(let t=0;t<r;t++)n[t]=e.charCodeAt(t);return n}function n(e){if("string"!=typeof e)throw TypeError("expected string");let r=0;e.startsWith("0x")&&(r+=2);var n=(e=1&e.length?"0"+e:e).length-r>>1;let i=new Uint8Array(n);for(let t=0;t<n;t++){var s=parseInt(e.slice(r,r+=2),16);if(Number.isNaN(s))throw new TypeError("expected hex byte");i[t]=s}return i}function i(t){return[...t].map(t=>t.toString(16).padStart(2,"0")).join("")}function s(t){try{return decodeURIComponent(escape(String.fromCharCode(...t)))}catch(t){throw new Error("malformed utf8")}}class a{constructor(t,e){var r=1600;if(31&t)throw new Error("capacity % 32 != 0");if(t<0||r<=t)throw new Error("capacity must be [0,1600)");this.sponge=Array(50).fill(0),this.block_count=r-t>>5,this.block_index=0,this.suffix=e,this.ragged_block=0,this.ragged_shift=0}update(t){if(!(t instanceof Uint8Array))if(t instanceof ArrayBuffer)t=new Uint8Array(t);else if(Array.isArray(t))t=Uint8Array.from(t);else{if("string"!=typeof t)throw new TypeError("expected bytes");t=o(t)}let e=0;var r=t.length;if(0<this.ragged_shift&&(e=this._add_ragged(t,0),e==r))return this;let{sponge:n,block_index:i,block_count:s}=this;for(;e+4<=r;e+=4)n[i++]^=t[e]|t[e+1]<<8|t[e+2]<<16|t[e+3]<<24,i==s&&(c(n),i=0);return this.block_index=i,e<r&&this._add_ragged(t,e),this}_add_ragged(t,e){let{ragged_shift:r,ragged_block:n}=this,i=0;for(;e<t.length&&r<32;i++,e++,r+=8)n|=t[e]<<r;return 32==r&&(this._add_block(n),r=0,n=0),this.ragged_block=n,this.ragged_shift=r,i}_add_block(t){let{sponge:e,block_index:r,block_count:n}=this;e[r++]^=t,r==n&&(c(e),r=0),this.block_index=r}finalize(){let{sponge:t,suffix:e,ragged_shift:r,block_index:n,block_count:i}=this;if(r){if(-1==r)return this;e=this.ragged_block|e<<r}t[n]^=e,t[i-1]^=2147483648,c(t),this.ragged_shift=-1}}class f extends a{constructor(t,e){super(t<<1,e),this.size0=t>>2,this.byte_offset=0}hex(t){return i(this.bytes(t))}bytes(t){this.finalize();var{sponge:e,byte_offset:r,block_count:n}=this,i=3&r,s=(0<i)+((t=t||this.size0)+3>>2);let o=new Int32Array(s),a=(r>>2)%n;for(let t=0;t<s;t++)o[t]=e[a++],a==n&&(c(e),a=0);return this.byte_offset=r+t,new Uint8Array(o.buffer,i,t)}}class h extends a{constructor(t,e){super(t<<1,e),this.size=t>>5}get hex(){return i(this.bytes)}get bytes(){this.finalize();var{size:e,sponge:r}=this;let n=new Int32Array(e);for(let t=0;t<e;t++)n[t]=r[t];return new Uint8Array(n.buffer)}}const Z=[1,0,32898,0,32906,-2147483648,-2147450880,-2147483648,32907,0,-2147483647,0,-2147450751,-2147483648,32777,-2147483648,138,0,136,0,-2147450871,0,-2147483638,0,-2147450741,0,139,-2147483648,32905,-2147483648,32771,-2147483648,32770,-2147483648,128,-2147483648,32778,0,-2147483638,-2147483648,-2147450751,-2147483648,32896,-2147483648,-2147483647,0,-2147450872,-2147483648];function c(e){for(let t=0;t<48;t+=2){var r=e[0]^e[10]^e[20]^e[30]^e[40],n=e[1]^e[11]^e[21]^e[31]^e[41],i=e[2]^e[12]^e[22]^e[32]^e[42],s=e[3]^e[13]^e[23]^e[33]^e[43],o=e[4]^e[14]^e[24]^e[34]^e[44],a=e[5]^e[15]^e[25]^e[35]^e[45],f=e[6]^e[16]^e[26]^e[36]^e[46],h=e[7]^e[17]^e[27]^e[37]^e[47],c=e[8]^e[18]^e[28]^e[38]^e[48],l=e[9]^e[19]^e[29]^e[39]^e[49],g=c^(i<<1|s>>>31),d=l^(s<<1|i>>>31);e[0]^=g,e[1]^=d,e[10]^=g,e[11]^=d,e[20]^=g,e[21]^=d,e[30]^=g,e[31]^=d,e[40]^=g,e[41]^=d,d=n^(a<<1|o>>>31),e[2]^=g=r^(o<<1|a>>>31),e[3]^=d,e[12]^=g,e[13]^=d,e[22]^=g,e[23]^=d,e[32]^=g,e[33]^=d,e[42]^=g,e[43]^=d,d=s^(h<<1|f>>>31),e[4]^=g=i^(f<<1|h>>>31),e[5]^=d,e[14]^=g,e[15]^=d,e[24]^=g,e[25]^=d,e[34]^=g,e[35]^=d,e[44]^=g,e[45]^=d,d=a^(l<<1|c>>>31),e[6]^=g=o^(c<<1|l>>>31),e[7]^=d,e[16]^=g,e[17]^=d,e[26]^=g,e[27]^=d,e[36]^=g,e[37]^=d,e[46]^=g,e[47]^=d,d=h^(n<<1|r>>>31),e[8]^=g=f^(r<<1|n>>>31),e[9]^=d,e[18]^=g,e[19]^=d,e[28]^=g,e[29]^=d,e[38]^=g,e[39]^=d,e[48]^=g,e[49]^=d;var u=e[0],_=e[1],y=e[11]<<4|e[10]>>>28,b=e[10]<<4|e[11]>>>28,p=e[20]<<3|e[21]>>>29,w=e[21]<<3|e[20]>>>29,x=e[31]<<9|e[30]>>>23,k=e[30]<<9|e[31]>>>23,A=e[40]<<18|e[41]>>>14,m=e[41]<<18|e[40]>>>14,v=e[2]<<1|e[3]>>>31,U=e[3]<<1|e[2]>>>31,z=e[13]<<12|e[12]>>>20,E=e[12]<<12|e[13]>>>20,C=e[22]<<10|e[23]>>>22,I=e[23]<<10|e[22]>>>22,T=e[33]<<13|e[32]>>>19,N=e[32]<<13|e[33]>>>19,S=e[42]<<2|e[43]>>>30,R=e[43]<<2|e[42]>>>30,j=e[5]<<30|e[4]>>>2,B=e[4]<<30|e[5]>>>2,W=e[14]<<6|e[15]>>>26,q=e[15]<<6|e[14]>>>26,D=e[25]<<11|e[24]>>>21,F=e[24]<<11|e[25]>>>21,G=e[34]<<15|e[35]>>>17,H=e[35]<<15|e[34]>>>17,J=e[45]<<29|e[44]>>>3,K=e[44]<<29|e[45]>>>3,L=e[6]<<28|e[7]>>>4,M=e[7]<<28|e[6]>>>4,O=e[17]<<23|e[16]>>>9,P=e[16]<<23|e[17]>>>9,Q=e[26]<<25|e[27]>>>7,V=e[27]<<25|e[26]>>>7,X=e[36]<<21|e[37]>>>11,Y=e[37]<<21|e[36]>>>11,s=e[47]<<24|e[46]>>>8,i=e[46]<<24|e[47]>>>8,a=e[8]<<27|e[9]>>>5,o=e[9]<<27|e[8]>>>5,c=e[18]<<20|e[19]>>>12,l=e[19]<<20|e[18]>>>12,h=e[29]<<7|e[28]>>>25,f=e[28]<<7|e[29]>>>25,r=e[38]<<8|e[39]>>>24,n=e[39]<<8|e[38]>>>24,g=e[48]<<14|e[49]>>>18,d=e[49]<<14|e[48]>>>18;e[0]=u^~z&D,e[1]=_^~E&F,e[10]=L^~c&p,e[11]=M^~l&w,e[20]=v^~W&Q,e[21]=U^~q&V,e[30]=a^~y&C,e[31]=o^~b&I,e[40]=j^~O&h,e[41]=B^~P&f,e[2]=z^~D&X,e[3]=E^~F&Y,e[12]=c^~p&T,e[13]=l^~w&N,e[22]=W^~Q&r,e[23]=q^~V&n,e[32]=y^~C&G,e[33]=b^~I&H,e[42]=O^~h&x,e[43]=P^~f&k,e[4]=D^~X&g,e[5]=F^~Y&d,e[14]=p^~T&J,e[15]=w^~N&K,e[24]=Q^~r&A,e[25]=V^~n&m,e[34]=C^~G&s,e[35]=I^~H&i,e[44]=h^~x&S,e[45]=f^~k&R,e[6]=X^~g&u,e[7]=Y^~d&_,e[16]=T^~J&L,e[17]=N^~K&M,e[26]=r^~A&v,e[27]=n^~m&U,e[36]=G^~s&a,e[37]=H^~i&o,e[46]=x^~S&j,e[47]=k^~R&B,e[8]=g^~u&z,e[9]=d^~_&E,e[18]=J^~L&c,e[19]=K^~M&l,e[28]=A^~v&W,e[29]=m^~U&q,e[38]=s^~a&y,e[39]=i^~o&b,e[48]=S^~j&O,e[49]=R^~B&P,e[0]^=Z[t],e[1]^=Z[t+1]}}export{t as keccak,e as sha3,r as shake,o as bytes_from_str,n as bytes_from_hex,i as hex_from_bytes,s as str_from_bytes};